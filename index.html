<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dienstplan OCR â†’ Apple Kalender</title>
  <style>
    :root{
      --bg0:#070716; --bg1:#0b0a1c;
      --stroke:#ffffff1a; --stroke2:#b9a7ff2a;
      --text:#e9e7ff; --muted:#bcb6ffb3; --muted2:#bcb6ff80;
      --shadow: 0 20px 80px #000000aa; --radius: 22px;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% 5%, #2a1b6a66, transparent 60%),
        radial-gradient(900px 600px at 85% 25%, #3a2aa866, transparent 60%),
        radial-gradient(900px 600px at 40% 85%, #1a3b9a44, transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }
    body::before{
      content:""; position:fixed; inset:0; pointer-events:none;
      background:
        radial-gradient(1px 1px at 10% 20%, #ffffff55, transparent 60%),
        radial-gradient(1px 1px at 30% 70%, #ffffff44, transparent 60%),
        radial-gradient(1px 1px at 80% 30%, #ffffff55, transparent 60%),
        radial-gradient(1px 1px at 55% 15%, #ffffff44, transparent 60%),
        radial-gradient(1px 1px at 70% 85%, #ffffff44, transparent 60%),
        radial-gradient(1px 1px at 15% 90%, #ffffff33, transparent 60%);
      opacity:.45;
    }
    .wrap{max-width:1200px;margin:56px auto;padding:0 18px 70px;}
    header{display:flex;align-items:flex-end;justify-content:space-between;gap:20px;margin-bottom:18px;}
    .brand{display:flex;flex-direction:column;gap:6px;}
    .brand h1{margin:0;font-size:22px;font-weight:800;line-height:1.1}
    .brand p{margin:0;color:var(--muted);font-size:13px;max-width:650px}
    .pill{
      display:inline-flex;align-items:center;gap:10px;padding:10px 12px;border-radius:999px;
      border:1px solid var(--stroke);
      background: linear-gradient(180deg, #14143b88, #0b0b2088);
      backdrop-filter: blur(10px); box-shadow: 0 10px 30px #00000066;
      color: var(--muted); font-size:12px; white-space:nowrap;
    }
    .dot{width:8px;height:8px;border-radius:99px;background:radial-gradient(circle at 30% 30%, #fff, #8f7dff);box-shadow:0 0 18px #8f7dff;}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-top:18px;}
    @media (max-width:920px){header{flex-direction:column;align-items:flex-start}.grid{grid-template-columns:1fr}}
    .card{
      position:relative; border-radius:var(--radius); border:1px solid var(--stroke);
      background:
        radial-gradient(900px 220px at 25% -10%, #8f7dff33, transparent 50%),
        radial-gradient(700px 260px at 80% 0%, #5b4cff22, transparent 55%),
        linear-gradient(180deg, #12123bcc, #0d0d25cc);
      backdrop-filter: blur(14px); box-shadow: var(--shadow); overflow:hidden; min-height:240px;
    }
    .card::after{
      content:""; position:absolute; inset:0; border-radius:var(--radius); padding:1px;
      background: linear-gradient(135deg, #ffffff22, #b9a7ff22, transparent 60%);
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite:xor; mask-composite:exclude; pointer-events:none;
    }
    .content{position:relative;padding:22px 22px 18px;display:flex;flex-direction:column;gap:10px;height:100%;}
    .kicker{color:var(--muted2);font-size:12px;letter-spacing:.25px}
    .title{font-size:26px;font-weight:800;line-height:1.15;margin:0}
    .desc{margin:0;color:var(--muted);font-size:13px;line-height:1.45;max-width:520px}
    .meter{width:210px;border-radius:16px;border:1px solid var(--stroke);padding:12px;background:linear-gradient(180deg,#15154688,#0c0c2388);box-shadow:0 14px 40px #00000066;backdrop-filter:blur(12px);margin-bottom:8px;}
    .meter .row{display:flex;align-items:center;justify-content:space-between;font-size:12px;color:var(--muted);margin-bottom:10px;}
    .bar{height:16px;border-radius:999px;border:1px solid var(--stroke);background:#0b0b1e;overflow:hidden;position:relative}
    .bar > span{position:absolute;inset:0;width:0%;background:linear-gradient(90deg,#8f7dff,#5b4cff);box-shadow:0 0 18px #8f7dffaa;border-radius:999px}
    .actions{display:flex;flex-wrap:wrap;gap:10px;margin-top:6px}
    button,.file{
      appearance:none;border:1px solid var(--stroke);border-radius:14px;
      background:linear-gradient(180deg,#17174a88,#0b0b2088);
      color:var(--text);padding:10px 12px;font-weight:650;font-size:13px;
      cursor:pointer; box-shadow:0 14px 40px #00000066; backdrop-filter:blur(12px);
      transition: transform .12s ease, border-color .12s ease;
    }
    button:hover,.file:hover{transform:translateY(-1px);border-color:var(--stroke2)}
    button:disabled{opacity:.5;cursor:not-allowed;transform:none}
    input[type="file"]{display:none}
    .file{display:inline-flex;align-items:center;gap:10px}
    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:12px; color:#e9e7ffcc;
      background:#070716aa; border:1px solid var(--stroke); border-radius:14px;
      padding:12px; min-height:128px; white-space:pre-wrap; word-break:break-word;
      box-shadow: inset 0 0 0 1px #00000033;
    }
    .status{display:inline-flex;align-items:center;gap:10px;color:var(--muted);font-size:12px;margin-top:4px;}
    .spinner{width:14px;height:14px;border-radius:99px;border:2px solid #ffffff22;border-top-color:#ffffffaa;animation:spin 1s linear infinite;display:none}
    @keyframes spin{to{transform:rotate(360deg)}}
    .small{font-size:12px;color:var(--muted2);margin:0}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <h1>Dienstplan Screenshot â†’ Apple Kalender</h1>
        <p>Alles lÃ¤uft im Browser (GitHub Pages). Bild â†’ OCR â†’ Termine â†’ <span class="mono" style="padding:2px 6px;border-radius:8px;min-height:auto">.ics</span> Download.</p>
      </div>
      <div class="pill"><span class="dot"></span> GitHub Pages â€¢ Tesseract OCR â€¢ iCalendar Export</div>
    </header>

    <div class="grid">
      <section class="card">
        <div class="content">
          <div class="meter">
            <div class="row"><span>OCR</span><span id="ocrPct">bereit</span></div>
            <div class="bar"><span id="barFill"></span></div>
          </div>
          <p class="kicker">Upload</p>
          <h2 class="title">Bild auswÃ¤hlen</h2>
          <p class="desc">WÃ¤hle einen Screenshot. Danach starten wir OCR und versuchen automatisch Termine zu erkennen.</p>

          <div class="actions">
            <label class="file">ðŸ“· Bild auswÃ¤hlen <input id="file" type="file" accept="image/*" /></label>
            <button id="run">OCR starten</button>
          </div>

          <div class="status"><span class="spinner" id="spin"></span><span id="status">Warte auf Bildâ€¦</span></div>
        </div>
      </section>

      <section class="card">
        <div class="content">
          <p class="kicker">Output</p>
          <h2 class="title">OCR Text</h2>
          <p class="desc">Der erkannte Text (zum PrÃ¼fen).</p>
          <div id="out" class="mono">Noch kein Text.</div>
        </div>
      </section>

      <section class="card">
        <div class="content">
          <p class="kicker">Events</p>
          <h2 class="title">Erkannte Termine</h2>
          <p class="desc">Vorschau der Schichten, die aus dem OCR-Text erkannt wurden.</p>
          <div id="preview" class="mono">Noch keine Vorschau.</div>
          <p class="small" id="summary">Keine Termine erkannt.</p>
        </div>
      </section>

      <section class="card">
        <div class="content">
          <p class="kicker">Export</p>
          <h2 class="title">Apple Kalender Import</h2>
          <p class="desc">Lade eine <b>.ics</b>-Datei herunter und importiere sie in Apple Kalender.</p>
          <div class="actions">
            <button id="download" disabled>ICS herunterladen</button>
            <button id="demo">Demo</button>
          </div>
          <div id="ics" class="mono">Noch keine ICS erzeugt.</div>
        </div>
      </section>
    </div>
  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>
